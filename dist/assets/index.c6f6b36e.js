import{r as i,R as e,u as y,i as k,g as G,U as L,p as I,N as x,f as V,D as F,K as P,Q as T,n as j,m as R,T as N,A as O,a as D,b as A,c as h,d as M,B as H}from"./vendor.082ef887.js";const B=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function c(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerpolicy&&(t.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?t.credentials="include":s.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(s){if(s.ep)return;s.ep=!0;const t=c(s);fetch(s.href,t)}};B();const K=i.exports.createContext({}),q=({children:l})=>{const[n,c]=i.exports.useState(""),o=i.exports.useMemo(()=>({globalGameCode:n,setGlobalGameCode:c}),[n,c]);return e.createElement(K.Provider,{value:o},l)},C=()=>{const l=y();return e.createElement(e.Fragment,null,e.createElement("header",{className:"sticky top-0 flex justify-center "},e.createElement("h1",{className:"py-2 mt-5 text-5xl font-bold text-alice-blue hover:cursor-pointer w-fit",onClick:()=>l("/")},"Escapade")))},J={apiKey:"AIzaSyCCRRNxg7EgpXvyNYSoTGlAcZT9sZ_2qZQ",authDomain:"escapadegame1.firebaseapp.com",projectId:"escapadegame1",storageBucket:"escapadegame1.appspot.com",messagingSenderId:"770899393477",appId:"1:770899393477:web:7521de702e3119066829ac",measurementId:"G-Q1HLVD0Q9F"},Q=k(J);G(Q);const z=L(),E=z,U=l=>Array(l).fill("x").join("").replace(/x/g,()=>String.fromCharCode(Math.floor(Math.random()*26)+65)),S=()=>""+Math.random().toString(36).substring(2,9),f=(l,n)=>{const[c,o]=i.exports.useState(()=>{if(typeof window=="undefined")return n;try{const t=window.localStorage.getItem(l);return t?JSON.parse(t):n}catch(t){return console.log(t),n}});return[c,t=>{try{const r=t instanceof Function?t(c):t;o(r),typeof window!="undefined"&&window.localStorage.setItem(l,JSON.stringify(r))}catch(r){console.log(r)}}]},Z=()=>{const l=y(),[n,c]=f("gameCode",""),[o,s]=f("hostId",""),t=async()=>{const r=U(6),d=S();try{await I(x(E,"games",r),{created:Date.now(),finished:!1,round:1,participants:[],theme:0,canJoin:!0,hostId:d,selectionStep:0}),c(r),s(d),l("/lobby")}catch(p){console.error("Error",p)}};return e.createElement(e.Fragment,null,e.createElement(C,null),e.createElement("div",{className:"flex flex-col items-center justify-center h-screen font-semibold"},e.createElement("h1",null,"Velg et tema"),e.createElement("button",{className:"btn-lg"},"Intro til Escapade"),e.createElement("div",null,e.createElement("h1",null,"Flere innstillinger")),e.createElement("button",{className:"my-2 btn-lg",onClick:()=>t()},"Fortsett")))},$=()=>{const l=y(),[n,c]=i.exports.useState(""),[o,s]=i.exports.useState(""),[t,r]=f("gameCode",""),d=m=>{c(m.currentTarget.value)},p=async()=>{if(n){const m=x(E,"games",n),a=await V(m);a.exists()&&a.data().canJoin?(r(n),l("/customize")):(console.error("Invalid game code"),s("Koden er ikke gyldig."))}else return};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-col items-center h-screen justify-evenly"},e.createElement("div",{className:"my-4"},e.createElement("h1",{className:"my-12 text-6xl font-bold text-center text-alice-blue"},"Escapade"),e.createElement("input",{className:"px-4 py-2 mr-2 text-black uppercase transition-all border rounded placeholder-normal border-independence focus:outline-none focus:shadow-sm focus:ring-magic-mint outline-colorful-blue",type:"text",value:n,onChange:d,placeholder:"Kode for spillet"}),e.createElement("button",{className:"btn-sm",onClick:()=>p()},"Bli med"),o?e.createElement("p",null,o):e.createElement("p",null,"\xA0")),e.createElement("div",{className:"flex flex-col items-center justify-center"},e.createElement("p",{className:"mb-2"},"Lag din egen Escapade"),e.createElement("button",{className:"btn-lg",onClick:()=>l("/create")},"Lag et spill"))))},X=l=>{const{participants:n}=l,[c,o]=f("gameCode",""),[s,t]=f("playerId",""),[r,d]=i.exports.useState([]),p=async()=>{if(n.length>0){const m=n.map(g=>g.id),a=[],u=F(E,"players"),b=P(u,T(j(),"in",m));(await R(b)).forEach(g=>{const w=g.data();a.push(w)}),d(a)}};return i.exports.useEffect(()=>(p(),()=>{d([])}),[n]),e.createElement(e.Fragment,null,e.createElement("h2",{className:"mb-4 text-xl"},"Kode for spillet er: ",e.createElement("b",null,c)),e.createElement("div",{className:"p-5 rounded bg-alice-blue w-96 h-96"},e.createElement("h1",{className:"text-xl font-bold text-center text-independence"},"Disse spillerne er inne"),e.createElement("div",{className:"flex flex-row"},r.map(m=>e.createElement("div",{className:"mx-5 my-3 text-md",key:m.id},e.createElement("p",{className:"text-independence"},m.name," ",s===m.id?"(deg)":""))))))},Y=l=>{const{participants:n,numberOfTeams:c}=l,[o,s]=f("gameCode",""),[t,r]=f("playerId",""),[d,p]=i.exports.useState([]),m=async a=>{await N(x(E,"games",o),{[`participants.${t}.teamId`]:a})};return i.exports.useEffect(()=>{const a=[];for(let u=1;u<=c;u++){const b={id:u,participants:[]};a.push(b)}p(a)},[]),d.length===0?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5/6 p-5 rounded bg-alice-blue h-5/6"},d.map(a=>e.createElement("div",{key:a.id},e.createElement("h1",{className:"text-xl font-bold text-independence"},"Lag ",a.id),";",e.createElement("button",{className:"btn-lg",onClick:()=>m(a.id)},"Velg lag ",a.id),e.createElement("div",{className:"flex flex-row"},Object.values(n).filter(u=>u.teamId===a.id).map(u=>e.createElement("div",{className:"mx-5 my-3 text-md",key:u.id},e.createElement("p",{className:"text-independence"},u.name," ",t===u.id?"(deg)":""))))))),e.createElement("div",{className:"p-5 mt-8 rounded bg-alice-blue"},e.createElement("h1",{className:"text-xl font-bold text-center text-independence"},"Ikke valgt lag"),e.createElement("div",{className:"flex flex-row"},Object.values(n).filter(a=>a.teamId===0).map(a=>e.createElement("div",{className:"mx-5 my-3 text-md",key:a.id},e.createElement("p",{className:"text-independence"},a.name," ",t===a.id?"(deg)":""))))))},_=()=>{y();const[l,n]=f("gameCode",""),[c,o]=f("hostId",""),[s,t]=i.exports.useState([]),[r,d]=i.exports.useState(0),[p,m]=i.exports.useState(!1),a=()=>{const b=x(E,"games",l);O(b,v=>{const g=v.data();g?(t(g.participants),c===g.hostId&&m(!0),r!==g.selectionStep&&d(g.selectionStep)):console.error("no data")})},u=async()=>{await N(x(E,"games",l),{selectionStep:1,canJoin:!1})};return i.exports.useEffect(()=>{a()},[]),e.createElement(e.Fragment,null,e.createElement(C,null),e.createElement("div",{className:"flex flex-col items-center mt-16 justify-evenly"},r===0&&e.createElement(X,{participants:s}),r===1&&e.createElement(Y,{participants:s,numberOfTeams:2}),e.createElement("div",{className:"mt-4"},p?e.createElement("button",{className:"btn-lg",onClick:()=>u()},"Fortsett"):e.createElement("p",null,"Vent p\xE5 at verten starter spillet.."))))},W=()=>{const l=y(),[n,c]=i.exports.useState(""),[o,s]=f("gameCode",""),[t,r]=f("playerId",""),d=async()=>{const a=S();r(a),await I(x(E,"players",a),{name:n,id:a}),await N(x(E,"games",o),{[`participants.${a}`]:{id:a,name:n,teamId:0,isReady:!1}}),l("/lobby")},p=async()=>{await N(x(E,"games",o),{participants:D({id:t,teamId:0})})},m=a=>{c(a.currentTarget.value)};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-col items-center justify-evenly"},e.createElement("div",{className:"my-4 text-center"},e.createElement("h1",{className:"my-12 text-6xl font-bold text-center text-alice-blue"},"Escapade"),e.createElement("input",{className:"px-4 py-2 text-black uppercase transition-all border rounded placeholder-normal border-independence focus:outline-none focus:shadow-sm focus:ring-magic-mint outline-colorful-blue",type:"text",value:n,onChange:m,placeholder:"Skriv inn navn"})),e.createElement("button",{className:"btn-sm",onClick:()=>{p(),l("/")}},"G\xE5 tilbake"),e.createElement("button",{className:"btn-sm",onClick:()=>d()},"Bli med")))},ee=()=>e.createElement("div",{className:"min-h-screen text-alice-blue font-inter bg-colorful-blue"},e.createElement(q,null,e.createElement(A,null,e.createElement(h,{path:"/",element:e.createElement($,null)}),e.createElement(h,{path:"/customize",element:e.createElement(W,null)}),e.createElement(h,{path:"/create",element:e.createElement(Z,null)}),e.createElement(h,{path:"/lobby",element:e.createElement(_,null)}))));M.render(e.createElement(e.StrictMode,null,e.createElement(H,null,e.createElement(ee,null))),document.getElementById("root"));
